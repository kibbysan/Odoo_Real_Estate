<odoo>
    <record id='estate_property_search_view' model='ir.ui.view'>
        <field name='name'>estate.property.view.search</field>
        <field name='model'>estate.property</field>
        <field name='arch' type='xml'>
            <search>
                <field name='name' filter_domain="[('name','ilike',self)]"/>
                <field name='postcode' /> 
                <field name='expected_price' />
                <field name='bedrooms' />
                <field name='living_area' filter_domain="[('living_area', '>=', self)]"/>
                <field name='facades' />
                <field name='state' invisible="1"/>

                <separator />

                <filter string="Available" name="available" domain="['|', ('state', '=', 'new'), ('state', '=', 'received')]"/>
                <filter string="New" name="state_new" domain="[('state', '=', 'new')]"/>
                <filter string="Offer Received" name="state_received" domain="[('state', '=', 'received')]"/>

                <separator />

                <!--<group expand="1" string="Group By">
                    <filter string="Postcode" name="groupby_postcode" context="{'group_by': 'postcode'}"/>
                </group>-->
            </search>
        </field>
    </record>

    <record id='estate_property_form_view' model='ir.ui.view'>
        <field name='name'>estate.property.view.form</field>
        <field name='model'>estate.property</field>
        <field name='arch' type='xml'>
            <form>
                <header>
                     <button string = "Mark as Sold" type="object" name="action_sold" class="oe_highlight" invisible = "state in ('sold', 'canceled')"/>
                     <button string = "Cancel Property" type="object" name="action_cancel" invisible = "state in ('sold', 'canceled')"/>
                     <field name= "state" widget="statusbar" statusbar_visible="new,received,accepted,sold"/>
                </header>
                <sheet>
                    <div class="oe_title">
                        <div class="oe_edit_only">
                            <label for="name" />
                        </div>
                        <h1 class="mb32">
                            <field name="name" class="mb16" placeholder="e.g. Cozy Bungalow" />
                            <field name='tag_ids' widget='many2many_tags' options="{'color_field': 'color'}"/>
                        </h1>
                        <field name ="active" invisible="1"/>
                    </div>
                    <group>
                        <group>
                            <field name='property_type_id' />
                            <field name='postcode' />
                            <field name='date_availability' />
                        </group>
                        <group>
                            <field name='expected_price' />
                            <field name = 'best_offer'/>
                            <field name='selling_price' />
                        </group>
                    </group>
                    <notebook>
                        <page string='Description'>
                            <group>
                                <field name='description' />
                                <field name='bedrooms' />
                                <field name='living_area' />
                                <field name='garage' />
                                <field name='garden' />
                                <field name='garden_area' invisible="not garden"/>
                                <field name='garden_orientation' widget="radio" invisible="not garden"/>
                                <field name = 'total_area'/>
                            </group>
                        </page>
                        <page string='Offers'>
                            <field name='offer_ids' readonly = "state in ('accepted', 'sold', 'canceled')">
                                <list decoration-success="status == 'accepted'" decoration-danger="status == 'refused'">
                                    <field name= 'price'/>
                                    <field name = 'partner_id'/>
                                    <field name = 'validity'/>
                                    <field name = 'date_deadline'/>
                                    <button icon="fa-check" type="object" name="action_accept" invisible="parent.state in ('sold', 'canceled')"/>
                                    <button icon="fa-times" type="object" name="action_refuse" invisible="parent.state in ('sold', 'canceled')"/>
                                    <field name = 'status'/>
                                </list>
                            </field>
                        </page>
                        <page string='Other Info'>
                            <field name = 'other_info' />
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id='estate_property_list_view' model='ir.ui.view'>
        <field name='name'>estate.property.view.list</field>
        <field name='model'>estate.property</field>
        <field name='arch' type='xml'>
            <list>
                <field name='name' />
                <field name='postcode' />
                <field name='bedrooms' />
                <field name='living_area' />
                <field name='expected_price' />
                <field name='selling_price' />
                <field name='date_availability' />
            </list>
        </field>
    </record>
    <record id="test_record" model="ir.actions.act_window">
        <field name="name">Test</field>
        <field name="res_model">estate.property</field>
        <field name="view_mode">list,form</field>
        <field name="search_view_id" ref="estate_property_search_view"/>
        <field name="context"> {'search_default_available': True}</field>
    </record>
</odoo>